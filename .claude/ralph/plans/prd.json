[
  {
    "id": "P0-BE-001",
    "story": "项目脚手架搭建 (Go Module, 目录结构)",
    "priority": "high",
    "requirements": [
      "创建 Go Module 项目结构",
      "建立 DDD 分层目录",
      "配置 go.mod 和基础依赖"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-002",
    "story": "数据库连接配置 (PostgreSQL)",
    "priority": "high",
    "requirements": [
      "配置 GORM 连接 PostgreSQL",
      "实现连接池配置",
      "支持环境变量读取数据库配置"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-003",
    "story": "日志框架配置",
    "priority": "high",
    "requirements": [
      "集成 zap 日志框架",
      "支持不同环境日志级别",
      "实现结构化日志输出"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-004",
    "story": "数据库迁移工具配置 (golang-migrate)",
    "priority": "high",
    "requirements": [
      "集成 golang-migrate",
      "创建迁移脚本目录",
      "实现迁移命令封装"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-005",
    "story": "通用值对象实现 (Money, Quantity)",
    "priority": "high",
    "requirements": [
      "实现 Money 值对象",
      "实现 Quantity 值对象",
      "编写值对象单元测试"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-006",
    "story": "领域事件基础设施 (EventBus, Outbox)",
    "priority": "high",
    "requirements": [
      "实现 EventBus 接口",
      "实现 Outbox Pattern",
      "支持事件发布订阅"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-007",
    "story": "策略注册中心实现",
    "priority": "medium",
    "requirements": [
      "实现策略模式注册中心",
      "支持策略动态注册获取",
      "提供策略类型校验"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-008",
    "story": "HTTP 框架配置 (Gin)",
    "priority": "high",
    "requirements": [
      "配置 Gin 框架",
      "实现通用中间件",
      "配置路由分组"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-009",
    "story": "API 响应格式统一",
    "priority": "high",
    "requirements": [
      "定义统一响应结构",
      "实现响应工具函数",
      "实现错误码规范"
    ],
    "passes": true
  },
  {
    "id": "P0-BE-010",
    "story": "单元测试框架配置",
    "priority": "medium",
    "requirements": [
      "集成 testify",
      "配置测试覆盖率工具",
      "创建测试工具函数"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-001",
    "story": "前端项目脚手架搭建 (React + TypeScript)",
    "priority": "high",
    "requirements": [
      "使用 Vite 创建项目",
      "配置 ESLint 和 Prettier",
      "建立目录结构"
    ],
    "passes": true
  },
  {
    "id": "P0-API-001",
    "story": "OpenAPI 规范与 SDK 自动生成",
    "priority": "high",
    "requirements": [
      "后端集成 swaggo/swag 生成 OpenAPI 规范",
      "前端集成 orval 生成 TypeScript SDK",
      "配置 Makefile 和 npm scripts 自动化生成流程",
      "编写示例 API 验证完整流程"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-002",
    "story": "UI 组件库集成 (Semi Design)",
    "priority": "high",
    "requirements": [
      "安装 @douyinfe/semi-ui",
      "配置主题和全局样式",
      "验证组件正常渲染"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-003",
    "story": "路由配置",
    "priority": "high",
    "requirements": [
      "配置 React Router v6",
      "建立路由结构和懒加载",
      "实现路由守卫基础"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-004",
    "story": "状态管理配置 (Zustand)",
    "priority": "high",
    "requirements": [
      "集成 Zustand",
      "创建 store 目录结构",
      "实现示例 store"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-005",
    "story": "HTTP 客户端封装 (Axios)",
    "priority": "high",
    "requirements": [
      "封装 Axios 实例",
      "实现请求响应拦截器",
      "统一错误处理"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-006",
    "story": "布局组件 (Header, Sidebar, Content)",
    "priority": "high",
    "requirements": [
      "实现主布局组件",
      "实现 Header 组件",
      "实现 Sidebar 导航组件"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-007",
    "story": "通用表单组件",
    "priority": "medium",
    "requirements": [
      "集成 React Hook Form",
      "实现通用表单字段",
      "实现表单验证工具"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-DS",
    "story": "前端设计规范体系 (Design System)",
    "priority": "critical",
    "requirements": [
      "建立响应式断点系统 (Mobile 375px / Tablet 768px / Desktop 1024px / Wide 1440px)",
      "实现 CSS 架构规范 (CSS Modules + CSS Variables + BEM 命名)",
      "创建设计 Token 系统 (颜色/字体/间距/阴影/动画)",
      "实现无障碍适老化支持 (WCAG 2.1 AA / 字体缩放 / 高对比度模式 / 焦点管理)",
      "建立交互设计规范 (最少点击原则 / 智能默认值 / 批量操作 / 快捷键)",
      "创建响应式布局工具 (Container / Grid / Flex 组件)",
      "实现主题切换系统 (亮色/暗色/适老化主题)",
      "将完整设计规范写入 frontend/README.md",
      "在根目录 CLAUDE.md 中引用 frontend/README.md，要求 LLM 开发前端时必须遵循该规范"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-008",
    "story": "通用表格组件",
    "priority": "medium",
    "requirements": [
      "基于 Semi Table 封装",
      "支持分页排序筛选",
      "实现表格操作列"
    ],
    "passes": true
  },
  {
    "id": "P0-FE-009",
    "story": "前端测试框架配置 (Vitest)",
    "priority": "medium",
    "requirements": [
      "配置 Vitest",
      "配置 React Testing Library",
      "创建测试工具函数"
    ],
    "passes": true
  },
  {
    "id": "P0-PD-001",
    "story": "商品模块原型设计",
    "priority": "medium",
    "requirements": [
      "设计商品列表页原型",
      "设计商品表单原型",
      "设计分类管理原型"
    ],
    "passes": false
  },
  {
    "id": "P0-PD-002",
    "story": "伙伴模块原型设计",
    "priority": "medium",
    "requirements": [
      "设计客户管理页原型",
      "设计供应商管理页原型",
      "设计仓库管理页原型"
    ],
    "passes": false
  },
  {
    "id": "P0-PD-003",
    "story": "库存模块原型设计",
    "priority": "medium",
    "requirements": [
      "设计库存查询页原型",
      "设计库存调整页原型",
      "设计盘点管理页原型"
    ],
    "passes": false
  },
  {
    "id": "P0-PD-004",
    "story": "交易模块原型设计",
    "priority": "medium",
    "requirements": [
      "设计销售订单页原型",
      "设计采购订单页原型",
      "设计退货管理页原型"
    ],
    "passes": false
  },
  {
    "id": "P0-PD-005",
    "story": "财务模块原型设计",
    "priority": "medium",
    "requirements": [
      "设计应收应付页原型",
      "设计收付款页原型",
      "设计日常收支页原型"
    ],
    "passes": false
  },
  {
    "id": "P1-BE-001",
    "story": "Category 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 Category 聚合根",
      "支持树形分类结构",
      "实现分类增删改查"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-002",
    "story": "Product 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 Product 聚合根",
      "包含 SKU/名称/条码/规格",
      "实现启用禁用状态管理"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-003",
    "story": "Product Repository 接口 + 实现",
    "priority": "high",
    "requirements": [
      "定义 ProductRepository 接口",
      "实现 GORM 版本 Repository",
      "支持分页查询和筛选"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-004",
    "story": "Product Application Service",
    "priority": "high",
    "requirements": [
      "实现商品应用服务",
      "实现 CRUD 用例",
      "实现状态变更用例"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-005",
    "story": "Product API (CRUD + enable/disable)",
    "priority": "high",
    "requirements": [
      "实现商品 CRUD API",
      "实现启用禁用 API",
      "实现列表分页查询 API"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-006",
    "story": "ProductUnit 多单位支持",
    "priority": "medium",
    "requirements": [
      "实现 ProductUnit 实体",
      "支持多单位换算比例",
      "实现单位增删改"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-007",
    "story": "Product 领域事件发布",
    "priority": "medium",
    "requirements": [
      "定义 ProductCreated 事件",
      "定义 ProductUpdated 事件",
      "在聚合中发布事件"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-010",
    "story": "Customer 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 Customer 聚合根",
      "包含基本信息联系方式地址",
      "实现客户分级属性"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-011",
    "story": "Supplier 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 Supplier 聚合根",
      "包含基本信息联系方式",
      "实现供应商状态管理"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-012",
    "story": "Warehouse 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 Warehouse 聚合根",
      "包含仓库名称地址类型",
      "实现仓库启用禁用"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-013",
    "story": "Partner Repository 接口 + 实现",
    "priority": "high",
    "requirements": [
      "定义 CustomerRepository 接口",
      "定义 SupplierRepository 接口",
      "定义 WarehouseRepository 接口"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-014",
    "story": "Partner Application Service",
    "priority": "high",
    "requirements": [
      "实现客户应用服务",
      "实现供应商应用服务",
      "实现仓库应用服务"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-015",
    "story": "Partner API (Customer/Supplier/Warehouse)",
    "priority": "high",
    "requirements": [
      "实现客户 CRUD API",
      "实现供应商 CRUD API",
      "实现仓库 CRUD API"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-016",
    "story": "CustomerBalance 余额功能",
    "priority": "medium",
    "requirements": [
      "实现 CustomerBalance 值对象",
      "实现余额增减操作",
      "实现余额查询"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-017",
    "story": "BalanceTransaction 实现",
    "priority": "medium",
    "requirements": [
      "实现 BalanceTransaction 实体",
      "记录余额变动明细",
      "支持充值消费退款类型"
    ],
    "passes": true
  },
  {
    "id": "P1-BE-018",
    "story": "Customer Balance API",
    "priority": "medium",
    "requirements": [
      "实现余额查询 API",
      "实现充值 API",
      "实现余额流水查询 API"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-001",
    "story": "商品列表页面",
    "priority": "high",
    "requirements": [
      "实现商品列表展示",
      "支持分页和搜索",
      "支持启用禁用操作"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-002",
    "story": "商品新增/编辑表单",
    "priority": "high",
    "requirements": [
      "实现商品新增表单",
      "实现商品编辑表单",
      "实现表单验证"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-003",
    "story": "商品分类管理 (树形结构)",
    "priority": "medium",
    "requirements": [
      "实现分类树形展示",
      "实现分类增删改",
      "实现拖拽排序"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-004",
    "story": "客户列表页面",
    "priority": "high",
    "requirements": [
      "实现客户列表展示",
      "支持分页和搜索",
      "显示客户余额信息"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-005",
    "story": "客户新增/编辑表单",
    "priority": "high",
    "requirements": [
      "实现客户新增表单",
      "实现客户编辑表单",
      "实现表单验证"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-006",
    "story": "供应商列表页面",
    "priority": "high",
    "requirements": [
      "实现供应商列表展示",
      "支持分页和搜索",
      "支持状态筛选"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-007",
    "story": "供应商新增/编辑表单",
    "priority": "high",
    "requirements": [
      "实现供应商新增表单",
      "实现供应商编辑表单",
      "实现表单验证"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-008",
    "story": "仓库管理页面",
    "priority": "high",
    "requirements": [
      "实现仓库列表展示",
      "实现仓库新增编辑",
      "支持启用禁用操作"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-009",
    "story": "客户余额管理页面",
    "priority": "medium",
    "requirements": [
      "实现余额展示",
      "实现余额流水查询",
      "支持充值入口"
    ],
    "passes": true
  },
  {
    "id": "P1-FE-010",
    "story": "客户充值弹窗",
    "priority": "medium",
    "requirements": [
      "实现充值弹窗组件",
      "支持金额输入和验证",
      "充值成功后刷新余额"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-001",
    "story": "Product 聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试 Product 创建逻辑",
      "测试状态变更逻辑",
      "测试不变量校验"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-002",
    "story": "Product API 集成测试",
    "priority": "medium",
    "requirements": [
      "测试 CRUD API",
      "测试分页查询",
      "测试错误场景"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-003",
    "story": "Partner 聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试 Customer 聚合",
      "测试 Supplier 聚合",
      "测试 Warehouse 聚合"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-004",
    "story": "Partner API 集成测试",
    "priority": "medium",
    "requirements": [
      "测试客户 API",
      "测试供应商 API",
      "测试仓库 API"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-005",
    "story": "商品模块前端组件测试",
    "priority": "medium",
    "requirements": [
      "测试商品列表组件",
      "测试商品表单组件",
      "测试分类树组件"
    ],
    "passes": true
  },
  {
    "id": "P1-QA-006",
    "story": "伙伴模块前端组件测试",
    "priority": "medium",
    "requirements": [
      "测试客户列表组件",
      "测试供应商列表组件",
      "测试仓库列表组件"
    ],
    "passes": true
  },
  {
    "id": "P1-INT-001",
    "story": "商品模块前后端联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: docker-compose.test.yml 启动，seed-data.sql 加载",
      "E2E: 登录后访问商品列表，验证 seed 商品数据正确显示",
      "E2E: 创建新商品，填写完整表单，验证数据库记录生成",
      "E2E: 编辑商品信息，验证更新后列表和详情页显示一致",
      "E2E: 启用/禁用商品状态，验证状态变更和列表筛选",
      "E2E: 删除商品，验证软删除逻辑和列表刷新",
      "E2E: 分页和搜索功能验证",
      "截图断言: 商品列表、表单、详情页",
      "",
      "⚠️ E2E 验证必须: ./docker/local-test.sh run-e2e tests/e2e/products/product.spec.ts",
      "⚠️ 必须连续 3 次运行全部通过才能标记为 passes"
    ],
    "passes": true
  },
  {
    "id": "P1-INT-002",
    "story": "伙伴模块前后端联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 客户/供应商/仓库数据",
      "E2E 客户: 列表展示、新建、编辑、状态变更",
      "E2E 供应商: 列表展示、新建、编辑、状态变更",
      "E2E 仓库: 列表展示、新建、启用/禁用",
      "E2E: 验证客户/供应商在订单选择器中正确显示",
      "E2E: 仓库在库存操作中正确可选",
      "截图断言: 各模块列表和表单页面",
      "",
      "⚠️ E2E 验证必须: ./docker/local-test.sh run-e2e tests/e2e/partners/*.spec.ts",
      "⚠️ 当前状态: customer.spec.ts 有 5 个 test.skip 需要修复"
    ],
    "passes": false
  },
  {
    "id": "P1-INT-003",
    "story": "客户余额功能联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 使用 seed 客户和余额流水数据",
      "E2E: 客户详情页显示当前余额",
      "E2E: 执行充值操作，验证余额实时更新",
      "E2E: 查看余额流水列表，验证充值记录",
      "E2E: 销售订单使用余额支付，验证余额扣减",
      "E2E: 余额不足时显示提示，阻止超额支付",
      "截图断言: 充值前后余额变化",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P2-BE-001",
    "story": "InventoryItem 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 InventoryItem 聚合根",
      "包含仓库商品可用锁定数量",
      "实现库存不变量校验"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-002",
    "story": "StockBatch 实体实现",
    "priority": "high",
    "requirements": [
      "实现 StockBatch 实体",
      "包含批次号入库日期数量成本",
      "支持批次过期管理"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-003",
    "story": "成本计算策略实现 (移动加权/FIFO)",
    "priority": "high",
    "requirements": [
      "实现成本计算策略接口",
      "实现移动加权平均策略",
      "实现 FIFO 策略"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-004",
    "story": "批次管理策略实现",
    "priority": "medium",
    "requirements": [
      "实现批次出库策略接口",
      "实现 FIFO 批次策略",
      "实现指定批次策略"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-005",
    "story": "InventoryTransaction 实现",
    "priority": "high",
    "requirements": [
      "实现库存流水实体",
      "记录入库出库调整操作",
      "关联业务单据"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-006",
    "story": "StockLock 实现 (乐观锁)",
    "priority": "high",
    "requirements": [
      "实现库存锁定机制",
      "使用乐观锁防止超卖",
      "实现锁定超时释放"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-007",
    "story": "Inventory Repository 接口 + 实现",
    "priority": "high",
    "requirements": [
      "定义 InventoryRepository 接口",
      "实现 GORM 版本 Repository",
      "支持多维度查询"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-008",
    "story": "Inventory Application Service",
    "priority": "high",
    "requirements": [
      "实现库存查询服务",
      "实现库存锁定释放服务",
      "实现库存调整服务"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-009",
    "story": "Inventory API (查询/锁定/调整)",
    "priority": "high",
    "requirements": [
      "实现库存查询 API",
      "实现库存锁定 API",
      "实现库存调整 API"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-010",
    "story": "库存领域事件实现",
    "priority": "medium",
    "requirements": [
      "定义 StockLocked 事件",
      "定义 StockDeducted 事件",
      "定义 StockIncreased 事件"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-011",
    "story": "StockTaking 盘点聚合实现",
    "priority": "medium",
    "requirements": [
      "实现 StockTaking 聚合",
      "支持盘点单创建和执行",
      "实现盘点差异计算"
    ],
    "passes": true
  },
  {
    "id": "P2-BE-012",
    "story": "StockTaking API",
    "priority": "medium",
    "requirements": [
      "实现盘点单 CRUD API",
      "实现盘点执行 API",
      "实现盘点审批 API"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-001",
    "story": "库存查询列表页面",
    "priority": "high",
    "requirements": [
      "实现库存列表展示",
      "支持仓库商品筛选",
      "显示可用锁定数量"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-002",
    "story": "库存明细页面 (批次/流水)",
    "priority": "high",
    "requirements": [
      "实现批次明细展示",
      "实现流水记录展示",
      "支持时间范围筛选"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-003",
    "story": "库存调整页面",
    "priority": "high",
    "requirements": [
      "实现库存调整表单",
      "支持调整原因选择",
      "实现调整预览"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-004",
    "story": "盘点单创建页面",
    "priority": "medium",
    "requirements": [
      "实现盘点单创建表单",
      "支持选择仓库和商品范围",
      "支持导入系统库存"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-005",
    "story": "盘点执行页面",
    "priority": "medium",
    "requirements": [
      "实现盘点录入界面",
      "实时计算盘点差异",
      "支持提交审批"
    ],
    "passes": true
  },
  {
    "id": "P2-FE-006",
    "story": "库存预警配置页面",
    "priority": "low",
    "requirements": [
      "实现预警规则配置",
      "支持设置安全库存",
      "显示预警商品列表"
    ],
    "passes": false
  },
  {
    "id": "P2-QA-001",
    "story": "InventoryItem 聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试库存增减逻辑",
      "测试锁定释放逻辑",
      "测试不变量校验"
    ],
    "passes": true
  },
  {
    "id": "P2-QA-002",
    "story": "成本计算策略单元测试",
    "priority": "medium",
    "requirements": [
      "测试移动加权算法",
      "测试 FIFO 算法",
      "测试边界情况"
    ],
    "passes": true
  },
  {
    "id": "P2-QA-003",
    "story": "库存锁定并发测试",
    "priority": "high",
    "requirements": [
      "测试并发锁定场景",
      "验证乐观锁正确性",
      "测试超卖防护"
    ],
    "passes": true
  },
  {
    "id": "P2-QA-004",
    "story": "Inventory API 集成测试",
    "priority": "medium",
    "requirements": [
      "测试库存查询 API",
      "测试库存操作 API",
      "测试错误场景"
    ],
    "passes": true
  },
  {
    "id": "P2-QA-005",
    "story": "库存模块前端组件测试",
    "priority": "medium",
    "requirements": [
      "测试库存列表组件",
      "测试库存调整组件",
      "测试盘点组件"
    ],
    "passes": true
  },
  {
    "id": "P2-INT-001",
    "story": "库存模块前后端联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 库存数据（10 inventory items, 4 batches）",
      "E2E: 库存列表展示，验证可用/锁定数量计算正确",
      "E2E: 按仓库/商品筛选库存",
      "E2E: 库存调整操作，验证调整后数量变化",
      "E2E: 查看库存流水记录",
      "E2E 并发测试: 同时调整同一库存，验证乐观锁生效",
      "视频录制: 库存调整完整流程",
      "",
      "⚠️ E2E 验证必须: ./docker/local-test.sh run-e2e tests/e2e/inventory/inventory.spec.ts",
      "⚠️ 当前状态: inventory.spec.ts 有 test.skip() 需要修复"
    ],
    "passes": false
  },
  {
    "id": "P2-INT-002",
    "story": "盘点功能联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 使用 seed 库存数据",
      "E2E: 创建盘点单，选择仓库和商品范围",
      "E2E: 系统自动导入当前库存作为账面数",
      "E2E: 录入实际盘点数量",
      "E2E: 验证盘点差异自动计算（盘盈/盘亏）",
      "E2E: 提交盘点单审批",
      "E2E: 审批通过后库存自动调整",
      "视频录制: 完整盘点流程",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P3-BE-001",
    "story": "SalesOrder 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 SalesOrder 聚合根",
      "实现订单状态机",
      "实现订单金额计算"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-002",
    "story": "SalesOrderItem 实体实现",
    "priority": "high",
    "requirements": [
      "实现订单行项目实体",
      "包含商品数量单价金额",
      "支持多单位"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-003",
    "story": "多单位数量换算",
    "priority": "medium",
    "requirements": [
      "实现单位换算逻辑",
      "支持基本单位和辅助单位",
      "在订单中正确换算"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-004",
    "story": "定价策略实现 (标准/阶梯)",
    "priority": "medium",
    "requirements": [
      "实现标准定价策略",
      "实现阶梯定价策略",
      "支持客户特殊价格"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-005",
    "story": "SalesOrder Application Service",
    "priority": "high",
    "requirements": [
      "实现订单创建服务",
      "实现订单确认服务",
      "实现订单发货服务"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-006",
    "story": "SalesOrder 事件处理 (库存锁定)",
    "priority": "high",
    "requirements": [
      "订单确认时发布事件",
      "库存服务订阅并锁定库存",
      "实现事件重试机制"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-007",
    "story": "SalesOrder API",
    "priority": "high",
    "requirements": [
      "实现订单 CRUD API",
      "实现订单状态变更 API",
      "实现订单查询 API"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-010",
    "story": "PurchaseOrder 聚合根实现",
    "priority": "high",
    "requirements": [
      "实现 PurchaseOrder 聚合根",
      "实现采购订单状态机",
      "实现采购金额计算"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-011",
    "story": "采购收货逻辑 (分批入库)",
    "priority": "high",
    "requirements": [
      "实现分批收货逻辑",
      "更新采购订单状态",
      "生成入库记录"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-012",
    "story": "PurchaseOrder Application Service",
    "priority": "high",
    "requirements": [
      "实现采购订单创建",
      "实现采购订单确认",
      "实现收货服务"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-013",
    "story": "PurchaseOrder API",
    "priority": "high",
    "requirements": [
      "实现采购订单 CRUD API",
      "实现收货 API",
      "实现采购订单查询 API"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-020",
    "story": "SalesReturn 聚合根实现",
    "priority": "medium",
    "requirements": [
      "实现 SalesReturn 聚合根",
      "关联原销售订单",
      "实现退货状态机"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-021",
    "story": "SalesReturn 审批流程",
    "priority": "medium",
    "requirements": [
      "实现退货审批状态",
      "支持审批通过拒绝",
      "记录审批意见"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-022",
    "story": "SalesReturn 事件处理 (库存恢复)",
    "priority": "medium",
    "requirements": [
      "退货完成时发布事件",
      "库存服务订阅并恢复库存",
      "更新批次信息"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-023",
    "story": "SalesReturn API",
    "priority": "medium",
    "requirements": [
      "实现退货单 CRUD API",
      "实现审批 API",
      "实现退货完成 API"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-030",
    "story": "PurchaseReturn 聚合根实现",
    "priority": "medium",
    "requirements": [
      "实现 PurchaseReturn 聚合根",
      "关联原采购订单",
      "实现采购退货状态机"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-031",
    "story": "PurchaseReturn 发货流程",
    "priority": "medium",
    "requirements": [
      "实现退货发货逻辑",
      "扣减库存",
      "更新退货状态"
    ],
    "passes": true
  },
  {
    "id": "P3-BE-032",
    "story": "PurchaseReturn API",
    "priority": "medium",
    "requirements": [
      "实现采购退货 CRUD API",
      "实现发货 API",
      "实现退货完成 API"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-001",
    "story": "销售订单列表页面",
    "priority": "high",
    "requirements": [
      "实现订单列表展示",
      "支持状态筛选",
      "支持客户日期筛选"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-002",
    "story": "销售开单页面",
    "priority": "high",
    "requirements": [
      "实现客户选择",
      "实现商品添加",
      "实现金额计算和提交"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-003",
    "story": "销售订单详情页面",
    "priority": "high",
    "requirements": [
      "展示订单完整信息",
      "展示订单行项目",
      "展示状态变更历史"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-004",
    "story": "销售订单发货操作",
    "priority": "high",
    "requirements": [
      "实现发货确认弹窗",
      "支持选择发货仓库",
      "更新订单状态"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-010",
    "story": "采购订单列表页面",
    "priority": "high",
    "requirements": [
      "实现采购订单列表",
      "支持状态筛选",
      "支持供应商筛选"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-011",
    "story": "采购开单页面",
    "priority": "high",
    "requirements": [
      "实现供应商选择",
      "实现商品添加",
      "实现金额计算和提交"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-012",
    "story": "采购收货页面",
    "priority": "high",
    "requirements": [
      "展示待收货明细",
      "支持部分收货",
      "记录收货信息"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-020",
    "story": "销售退货列表页面",
    "priority": "medium",
    "requirements": [
      "实现退货单列表",
      "支持状态筛选",
      "支持客户筛选"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-021",
    "story": "销售退货创建页面",
    "priority": "medium",
    "requirements": [
      "选择原订单",
      "选择退货商品和数量",
      "填写退货原因"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-022",
    "story": "销售退货审批页面",
    "priority": "medium",
    "requirements": [
      "展示待审批退货单",
      "支持通过拒绝",
      "填写审批意见"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-030",
    "story": "采购退货列表页面",
    "priority": "medium",
    "requirements": [
      "实现采购退货列表",
      "支持状态筛选",
      "支持供应商筛选"
    ],
    "passes": true
  },
  {
    "id": "P3-FE-031",
    "story": "采购退货创建页面",
    "priority": "medium",
    "requirements": [
      "选择原采购订单",
      "选择退货商品和数量",
      "填写退货原因"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-001",
    "story": "SalesOrder 聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试订单创建逻辑",
      "测试状态流转",
      "测试金额计算"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-002",
    "story": "PurchaseOrder 聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试采购订单创建",
      "测试收货逻辑",
      "测试状态流转"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-003",
    "story": "订单状态流转测试",
    "priority": "medium",
    "requirements": [
      "测试合法状态流转",
      "测试非法状态流转",
      "测试状态前置条件"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-004",
    "story": "订单-库存联动集成测试",
    "priority": "high",
    "requirements": [
      "测试订单确认锁定库存",
      "测试发货扣减库存",
      "测试取消释放库存"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-005",
    "story": "交易模块前端组件测试",
    "priority": "medium",
    "requirements": [
      "测试订单列表组件",
      "测试开单表单组件",
      "测试订单详情组件"
    ],
    "passes": true
  },
  {
    "id": "P3-QA-006",
    "story": "退货流程端到端测试 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 先创建完整销售/采购订单作为前置数据",
      "E2E 销售退货完整流程: 创建→审批→入库→验证库存恢复",
      "E2E 采购退货完整流程: 创建→发货→完成→验证库存扣减",
      "E2E 边界测试: 超量退货被阻止",
      "E2E 边界测试: 重复退货被阻止",
      "E2E 财务联动: 退货后红冲单自动生成",
      "多浏览器: Chrome/Firefox 兼容性",
      "Trace: 完整退货链路"
    ],
    "passes": false
  },
  {
    "id": "P3-INT-001",
    "story": "销售订单前后端联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 商品/客户/库存数据",
      "E2E: 创建销售订单，选择客户、添加多个商品行",
      "E2E: 验证订单金额自动计算（单价×数量-折扣）",
      "E2E: 订单确认，验证库存锁定数量增加",
      "E2E: 订单发货，选择仓库，验证库存扣减",
      "E2E: 查看订单详情和状态变更历史",
      "E2E: 订单取消，验证库存释放",
      "Trace: 订单状态流转完整链路",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试",
      "",
      "⚠️ E2E 验证必须: ./docker/local-test.sh run-e2e tests/e2e/transactions/sales-order.spec.ts"
    ],
    "passes": false
  },
  {
    "id": "P3-INT-002",
    "story": "采购订单前后端联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 商品/供应商/仓库数据",
      "E2E: 创建采购订单，选择供应商、添加商品行",
      "E2E: 订单确认，验证状态变更",
      "E2E: 执行收货操作（全部收货）",
      "E2E: 执行部分收货，验证收货进度显示",
      "E2E: 收货完成后验证库存入库",
      "E2E: 验证应付账款自动生成",
      "截图断言: 收货前后的库存变化",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试",
      "",
      "⚠️ E2E 验证必须: ./docker/local-test.sh run-e2e tests/e2e/transactions/purchase-order.spec.ts"
    ],
    "passes": false
  },
  {
    "id": "P3-INT-003",
    "story": "销售退货全流程联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 先执行销售订单发货作为前置",
      "E2E: 从订单详情创建退货单",
      "E2E: 选择退货商品和数量，填写退货原因",
      "E2E: 提交退货申请，状态变为待审批",
      "E2E: 切换审批人账号执行审批",
      "E2E: 审批通过后验证库存恢复",
      "E2E: 验证应收账款红冲记录生成",
      "截图断言: 每个状态节点页面",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P3-INT-004",
    "story": "采购退货全流程联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 先执行采购订单收货作为前置",
      "E2E: 从采购订单创建退货单",
      "E2E: 选择退货商品、数量和仓库",
      "E2E: 执行退货发货，验证库存扣减",
      "E2E: 标记退货完成，状态流转正确",
      "E2E: 验证应付账款红冲记录生成",
      "截图断言: 发货前后库存变化",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P4-BE-001",
    "story": "AccountReceivable 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 AccountReceivable 聚合",
      "包含客户金额状态",
      "支持部分收款"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-002",
    "story": "AccountPayable 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 AccountPayable 聚合",
      "包含供应商金额状态",
      "支持部分付款"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-003",
    "story": "应收应付自动生成 (事件处理)",
    "priority": "high",
    "requirements": [
      "订阅销售发货事件生成应收",
      "订阅采购收货事件生成应付",
      "实现事件幂等处理"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-004",
    "story": "红冲逻辑实现 (退货关联)",
    "priority": "medium",
    "requirements": [
      "退货完成时生成红冲单",
      "关联原应收应付",
      "更新应收应付余额"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-005",
    "story": "ReceiptVoucher 收款单实现",
    "priority": "high",
    "requirements": [
      "实现 ReceiptVoucher 聚合",
      "支持多种收款方式",
      "关联应收账款"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-006",
    "story": "余额支付逻辑",
    "priority": "medium",
    "requirements": [
      "支持客户余额抵扣",
      "扣减客户余额",
      "生成余额变动记录"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-007",
    "story": "PaymentVoucher 付款单实现",
    "priority": "high",
    "requirements": [
      "实现 PaymentVoucher 聚合",
      "支持多种付款方式",
      "关联应付账款"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-008",
    "story": "核销策略实现 (FIFO)",
    "priority": "high",
    "requirements": [
      "实现 FIFO 核销策略",
      "按应收应付日期顺序核销",
      "支持手动指定核销"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-009",
    "story": "ReconciliationService 核销服务",
    "priority": "high",
    "requirements": [
      "实现自动核销服务",
      "实现手动核销服务",
      "更新应收应付状态"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-010",
    "story": "Finance API (应收/应付/收款/付款)",
    "priority": "high",
    "requirements": [
      "实现应收应付查询 API",
      "实现收款付款 API",
      "实现核销 API"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-015",
    "story": "ExpenseRecord 费用聚合实现",
    "priority": "medium",
    "requirements": [
      "实现 ExpenseRecord 聚合",
      "支持费用分类",
      "记录费用明细"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-016",
    "story": "OtherIncomeRecord 其他收入实现",
    "priority": "medium",
    "requirements": [
      "实现 OtherIncomeRecord 聚合",
      "支持收入分类",
      "记录收入明细"
    ],
    "passes": true
  },
  {
    "id": "P4-BE-017",
    "story": "Expense/Income API",
    "priority": "medium",
    "requirements": [
      "实现费用 CRUD API",
      "实现其他收入 CRUD API",
      "实现收支汇总 API"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-001",
    "story": "应收账款列表页面",
    "priority": "high",
    "requirements": [
      "实现应收账款列表",
      "支持客户状态筛选",
      "显示待收金额"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-002",
    "story": "应付账款列表页面",
    "priority": "high",
    "requirements": [
      "实现应付账款列表",
      "支持供应商状态筛选",
      "显示待付金额"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-003",
    "story": "收款单创建页面",
    "priority": "high",
    "requirements": [
      "选择客户",
      "选择收款方式",
      "输入收款金额"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-004",
    "story": "收款核销页面",
    "priority": "high",
    "requirements": [
      "展示待核销应收",
      "支持自动手动核销",
      "显示核销结果"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-005",
    "story": "付款单创建页面",
    "priority": "high",
    "requirements": [
      "选择供应商",
      "选择付款方式",
      "输入付款金额"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-006",
    "story": "付款核销页面",
    "priority": "high",
    "requirements": [
      "展示待核销应付",
      "支持自动手动核销",
      "显示核销结果"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-010",
    "story": "费用录入页面",
    "priority": "medium",
    "requirements": [
      "实现费用录入表单",
      "支持费用分类选择",
      "支持附件上传"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-011",
    "story": "其他收入录入页面",
    "priority": "medium",
    "requirements": [
      "实现收入录入表单",
      "支持收入分类选择",
      "支持附件上传"
    ],
    "passes": true
  },
  {
    "id": "P4-FE-012",
    "story": "收支流水页面",
    "priority": "medium",
    "requirements": [
      "展示收支流水列表",
      "支持时间范围筛选",
      "支持分类筛选"
    ],
    "passes": true
  },
  {
    "id": "P4-QA-001",
    "story": "应收应付聚合单元测试",
    "priority": "medium",
    "requirements": [
      "测试应收创建和更新",
      "测试应付创建和更新",
      "测试状态变更"
    ],
    "passes": true
  },
  {
    "id": "P4-QA-002",
    "story": "核销策略单元测试",
    "priority": "medium",
    "requirements": [
      "测试 FIFO 核销算法",
      "测试部分核销",
      "测试超额核销处理"
    ],
    "passes": true
  },
  {
    "id": "P4-QA-003",
    "story": "交易-财务联动集成测试",
    "priority": "high",
    "requirements": [
      "测试发货生成应收",
      "测试收货生成应付",
      "测试退货红冲"
    ],
    "passes": true
  },
  {
    "id": "P4-QA-004",
    "story": "财务数据准确性测试",
    "priority": "high",
    "requirements": [
      "验证金额计算精度",
      "验证核销后余额",
      "验证汇总数据"
    ],
    "passes": true
  },
  {
    "id": "P4-QA-005",
    "story": "财务模块前端组件测试",
    "priority": "medium",
    "requirements": [
      "测试应收应付列表",
      "测试收付款表单",
      "测试核销组件"
    ],
    "passes": true
  },
  {
    "id": "P4-INT-001",
    "story": "财务核心功能联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 应收/应付/收付款数据",
      "E2E: 应收账款列表展示，验证 seed 数据正确",
      "E2E: 创建收款单，选择客户和收款方式",
      "E2E: 执行收款核销，验证 FIFO 自动匹配",
      "E2E: 应付账款列表展示",
      "E2E: 创建付款单，执行付款核销",
      "E2E: 验证核销后应收/应付余额更新",
      "视频录制: 完整收款核销流程",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P4-INT-002",
    "story": "日常收支功能联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 使用 seed 费用/收入数据",
      "E2E: 进入费用录入页面，填写分类、金额、备注",
      "E2E: 上传费用附件，验证预览功能",
      "E2E: 提交费用记录，列表显示新记录",
      "E2E: 录入其他收入记录",
      "E2E: 收支流水页面按日期筛选",
      "E2E: 导出收支报表下载",
      "截图断言: 各表单和列表页面",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P5-BE-001",
    "story": "SalesReport 读模型实现",
    "priority": "medium",
    "requirements": [
      "实现销售统计读模型",
      "支持多维度汇总",
      "支持时间范围查询"
    ],
    "passes": true
  },
  {
    "id": "P5-BE-002",
    "story": "InventoryTurnover 读模型实现",
    "priority": "medium",
    "requirements": [
      "实现库存周转读模型",
      "计算周转率",
      "支持商品分类维度"
    ],
    "passes": true
  },
  {
    "id": "P5-BE-003",
    "story": "ProfitLossStatement 损益表实现",
    "priority": "medium",
    "requirements": [
      "实现损益计算逻辑",
      "汇总销售收入和成本",
      "汇总费用和其他收入"
    ],
    "passes": true
  },
  {
    "id": "P5-BE-004",
    "story": "CashFlowStatement 现金流量表",
    "priority": "medium",
    "requirements": [
      "实现现金流计算",
      "分类经营投资筹资活动",
      "支持期间对比"
    ],
    "passes": true
  },
  {
    "id": "P5-BE-005",
    "story": "Report API (查询接口)",
    "priority": "medium",
    "requirements": [
      "实现销售报表 API",
      "实现库存报表 API",
      "实现财务报表 API"
    ],
    "passes": true
  },
  {
    "id": "P5-BE-006",
    "story": "报表数据异步聚合 (定时任务)",
    "priority": "low",
    "requirements": [
      "实现报表数据预聚合",
      "配置定时任务",
      "支持手动刷新"
    ],
    "passes": false
  },
  {
    "id": "P5-FE-001",
    "story": "销售报表页面 (图表)",
    "priority": "medium",
    "requirements": [
      "实现销售趋势图",
      "实现销售构成图",
      "支持时间范围切换"
    ],
    "passes": true
  },
  {
    "id": "P5-FE-002",
    "story": "销售排行榜页面",
    "priority": "medium",
    "requirements": [
      "实现商品销售排行",
      "实现客户销售排行",
      "支持维度切换"
    ],
    "passes": true
  },
  {
    "id": "P5-FE-003",
    "story": "库存周转报表页面",
    "priority": "medium",
    "requirements": [
      "展示库存周转数据",
      "实现周转率图表",
      "支持商品筛选"
    ],
    "passes": true
  },
  {
    "id": "P5-FE-004",
    "story": "损益报表页面",
    "priority": "medium",
    "requirements": [
      "展示损益表数据",
      "支持期间选择",
      "支持导出"
    ],
    "passes": true
  },
  {
    "id": "P5-FE-005",
    "story": "现金流量报表页面",
    "priority": "medium",
    "requirements": [
      "展示现金流量数据",
      "分类展示各项活动",
      "支持期间对比"
    ],
    "passes": true
  },
  {
    "id": "P5-FE-006",
    "story": "Dashboard 首页看板",
    "priority": "high",
    "requirements": [
      "展示关键指标卡片",
      "展示销售趋势图",
      "展示待办事项"
    ],
    "passes": true
  },
  {
    "id": "P5-INT-001",
    "story": "报表模块联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 需要完整业务数据支撑报表",
      "E2E: 销售报表页面，ECharts 图表正确渲染",
      "E2E: 切换时间范围，图表数据刷新",
      "E2E: 损益报表数据与交易记录一致",
      "E2E: 图表交互（hover 显示、点击钻取）",
      "E2E: 导出报表为 Excel/PDF",
      "视觉回归: 图表样式截图对比",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P6-BE-001",
    "story": "Tenant 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 Tenant 聚合",
      "包含租户名称状态配置",
      "支持租户启用停用"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-002",
    "story": "租户中间件 (tenant_id 注入)",
    "priority": "high",
    "requirements": [
      "实现租户识别中间件",
      "从 Token 提取 tenant_id",
      "注入请求上下文"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-003",
    "story": "Repository 层自动 tenant_id 过滤",
    "priority": "high",
    "requirements": [
      "实现 GORM 作用域",
      "自动添加 tenant_id 条件",
      "防止跨租户访问"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-004",
    "story": "Tenant API",
    "priority": "medium",
    "requirements": [
      "实现租户 CRUD API",
      "实现租户状态变更 API",
      "实现租户配置 API"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-010",
    "story": "User 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 User 聚合",
      "包含用户名密码哈希状态",
      "关联租户和角色"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-011",
    "story": "Role 聚合实现",
    "priority": "high",
    "requirements": [
      "实现 Role 聚合",
      "包含角色名称权限列表",
      "支持角色继承"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-012",
    "story": "Permission 权限模型实现",
    "priority": "high",
    "requirements": [
      "定义权限结构",
      "实现权限校验逻辑",
      "支持资源动作模式"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-013",
    "story": "DataScope 数据权限实现",
    "priority": "medium",
    "requirements": [
      "实现数据权限模型",
      "支持全部本部门本人数据",
      "在查询中应用数据权限"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-014",
    "story": "JWT 认证中间件",
    "priority": "high",
    "requirements": [
      "实现 JWT 生成和验证",
      "实现 Token 刷新机制",
      "处理 Token 过期"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-015",
    "story": "权限校验中间件",
    "priority": "high",
    "requirements": [
      "实现权限校验中间件",
      "根据路由校验权限",
      "返回适当错误信息"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-016",
    "story": "Auth API (登录/登出/刷新)",
    "priority": "high",
    "requirements": [
      "实现登录 API",
      "实现登出 API",
      "实现 Token 刷新 API"
    ],
    "passes": true
  },
  {
    "id": "P6-BE-017",
    "story": "User/Role 管理 API",
    "priority": "medium",
    "requirements": [
      "实现用户 CRUD API",
      "实现角色 CRUD API",
      "实现用户角色分配 API"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-001",
    "story": "登录页面",
    "priority": "high",
    "requirements": [
      "实现登录表单",
      "实现表单验证",
      "处理登录错误"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-002",
    "story": "Token 存储与刷新逻辑",
    "priority": "high",
    "requirements": [
      "实现 Token 存储",
      "实现自动刷新",
      "处理 Token 过期"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-003",
    "story": "路由权限控制",
    "priority": "high",
    "requirements": [
      "实现路由守卫",
      "根据权限过滤菜单",
      "处理无权限访问"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-004",
    "story": "用户管理页面",
    "priority": "medium",
    "requirements": [
      "实现用户列表",
      "实现用户新增编辑",
      "实现用户状态管理"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-005",
    "story": "角色管理页面",
    "priority": "medium",
    "requirements": [
      "实现角色列表",
      "实现角色新增编辑",
      "实现权限配置"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-006",
    "story": "权限配置页面",
    "priority": "medium",
    "requirements": [
      "展示权限树",
      "支持权限勾选",
      "保存权限配置"
    ],
    "passes": true
  },
  {
    "id": "P6-FE-007",
    "story": "租户切换组件",
    "priority": "low",
    "requirements": [
      "实现租户选择器",
      "切换后刷新数据",
      "记住上次选择"
    ],
    "passes": false
  },
  {
    "id": "P6-QA-001",
    "story": "租户隔离测试",
    "priority": "high",
    "requirements": [
      "测试租户数据隔离",
      "测试跨租户访问拒绝",
      "测试 SQL 注入防护"
    ],
    "passes": true
  },
  {
    "id": "P6-QA-002",
    "story": "权限控制测试",
    "priority": "high",
    "requirements": [
      "测试无权限访问拒绝",
      "测试权限继承",
      "测试数据权限"
    ],
    "passes": true
  },
  {
    "id": "P6-QA-003",
    "story": "安全漏洞扫描",
    "priority": "high",
    "requirements": [
      "执行安全扫描",
      "测试 XSS 防护",
      "测试 CSRF 防护"
    ],
    "passes": true
  },
  {
    "id": "P6-INT-001",
    "story": "多租户隔离联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: seed 数据包含 3 个租户",
      "E2E: 不同租户用户登录，验证只能看到本租户数据",
      "E2E: 租户 A 创建商品，租户 B 看不到",
      "E2E: 验证 API 层租户隔离（X-Tenant-ID header）",
      "E2E: 租户切换后页面数据刷新",
      "E2E 安全测试: 尝试访问其他租户 ID 的资源，验证 403",
      "Trace: 租户隔离 SQL 查询日志",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P6-INT-002",
    "story": "认证授权联调 (E2E Docker)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 使用 seed 用户（admin/sales/warehouse/finance）",
      "E2E: 登录页面，正确凭证登录成功跳转",
      "E2E: 错误密码登录失败，显示错误提示",
      "E2E: Token 过期后自动刷新",
      "E2E: 登出后清除 Token，重定向到登录页",
      "E2E: 无权限访问返回 403 或跳转",
      "E2E: 不同角色用户看到不同菜单",
      "截图断言: 登录页、各角色首页"
    ],
    "passes": true
  },
  {
    "id": "P6-INT-003",
    "story": "用户角色管理联调 (E2E Docker)",
    "priority": "medium",
    "requirements": [
      "Docker 环境: 使用 seed 用户和角色数据",
      "E2E: 管理员创建新用户并分配角色",
      "E2E: 新用户登录，菜单按权限显示",
      "E2E: 访问无权限页面返回 403",
      "E2E: 修改用户角色后重新登录验证",
      "E2E: 创建自定义角色，配置细粒度权限",
      "E2E: 测试 DataScope 数据权限过滤",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-001",
    "story": "PaymentGateway Port 定义",
    "priority": "low",
    "requirements": [
      "定义支付网关接口",
      "定义统一支付请求响应",
      "定义回调接口"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-002",
    "story": "微信支付 Adapter",
    "priority": "low",
    "requirements": [
      "实现微信支付适配器",
      "支持扫码支付",
      "处理支付回调"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-003",
    "story": "支付宝 Adapter",
    "priority": "low",
    "requirements": [
      "实现支付宝适配器",
      "支持扫码支付",
      "处理支付回调"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-004",
    "story": "支付回调处理服务",
    "priority": "low",
    "requirements": [
      "实现回调验签",
      "更新支付状态",
      "发布支付完成事件"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-010",
    "story": "EcommercePlatform Port 定义",
    "priority": "low",
    "requirements": [
      "定义电商平台接口",
      "定义订单同步接口",
      "定义商品映射接口"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-011",
    "story": "ProductMapping 实现",
    "priority": "low",
    "requirements": [
      "实现商品映射实体",
      "支持 SKU 映射",
      "支持批量映射"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-012",
    "story": "淘宝 Adapter (可选)",
    "priority": "low",
    "requirements": [
      "实现淘宝 API 适配器",
      "支持订单拉取",
      "支持库存同步"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-013",
    "story": "抖音 Adapter (可选)",
    "priority": "low",
    "requirements": [
      "实现抖音 API 适配器",
      "支持订单拉取",
      "支持库存同步"
    ],
    "passes": false
  },
  {
    "id": "P7-BE-014",
    "story": "订单同步定时任务",
    "priority": "low",
    "requirements": [
      "实现订单同步任务",
      "配置同步频率",
      "处理同步异常"
    ],
    "passes": false
  },
  {
    "id": "P7-FE-001",
    "story": "支付方式配置页面",
    "priority": "low",
    "requirements": [
      "配置支付渠道",
      "配置商户信息",
      "测试连接"
    ],
    "passes": false
  },
  {
    "id": "P7-FE-002",
    "story": "电商平台配置页面",
    "priority": "low",
    "requirements": [
      "配置平台授权",
      "配置同步参数",
      "测试连接"
    ],
    "passes": false
  },
  {
    "id": "P7-FE-003",
    "story": "商品映射管理页面",
    "priority": "low",
    "requirements": [
      "展示映射列表",
      "支持手动映射",
      "支持批量映射"
    ],
    "passes": false
  },
  {
    "id": "P7-FE-004",
    "story": "平台订单同步状态页面",
    "priority": "low",
    "requirements": [
      "展示同步历史",
      "显示同步状态",
      "支持手动同步"
    ],
    "passes": false
  },
  {
    "id": "P7-INT-001",
    "story": "支付功能联调 (E2E Docker + Mock Gateway)",
    "priority": "low",
    "requirements": [
      "Docker 环境 + Mock 支付网关服务",
      "E2E: 收款页面选择微信/支付宝",
      "E2E Mock: 模拟扫码支付返回二维码",
      "E2E Mock: 模拟支付回调更新订单状态",
      "E2E: 支付成功后应收自动核销",
      "E2E 异常: 支付超时、支付失败场景",
      "Trace: 支付流程 API 调用链",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P7-INT-002",
    "story": "电商订单同步联调 (E2E Docker + Mock Platform)",
    "priority": "low",
    "requirements": [
      "Docker 环境 + Mock 电商平台 API",
      "E2E: 配置电商平台授权",
      "E2E Mock: 模拟平台订单拉取 API",
      "E2E: 外部订单转换为系统销售订单",
      "E2E: 商品映射自动匹配 SKU",
      "E2E: 同步状态页面查看历史",
      "E2E 异常: 同步失败重试机制",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P8-001",
    "story": "端到端业务流程测试",
    "priority": "high",
    "requirements": [
      "执行完整销售流程测试",
      "执行完整采购流程测试",
      "执行退货流程测试"
    ],
    "passes": true
  },
  {
    "id": "P8-002",
    "story": "性能压力测试",
    "priority": "high",
    "requirements": [
      "执行并发测试",
      "执行负载测试",
      "识别性能瓶颈"
    ],
    "passes": true
  },
  {
    "id": "P8-003",
    "story": "安全渗透测试",
    "priority": "high",
    "requirements": [
      "执行渗透测试",
      "测试认证安全",
      "测试数据安全"
    ],
    "passes": true
  },
  {
    "id": "P8-004",
    "story": "UAT 用户验收测试 (E2E Docker Full Suite)",
    "priority": "high",
    "requirements": [
      "Docker 环境: 完整测试环境 + 全量 seed 数据",
      "E2E 核心流程: 销售全流程（开单→发货→收款→核销）",
      "E2E 核心流程: 采购全流程（开单→收货→付款→核销）",
      "E2E 核心流程: 库存管理（入库→出库→调整→盘点）",
      "E2E 核心流程: 客户管理（创建→充值→消费→查询）",
      "E2E 多租户: 切换租户验证数据隔离",
      "E2E 权限: 各角色用户操作限制",
      "性能基线: 页面加载<3s，API响应<500ms",
      "用户操作视频: 录制关键流程",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P8-005",
    "story": "问题修复与回归测试 (E2E Docker CI)",
    "priority": "high",
    "requirements": [
      "Docker 环境: CI/CD 集成 E2E 测试",
      "每个 Bug 创建对应 E2E 测试用例",
      "完整 E2E 套件通过率 > 95%",
      "Flaky 测试隔离和修复",
      "HTML 测试报告（截图+视频）",
      "PR 合并前必须通过 E2E 测试",
      "核心业务流程 100% 覆盖",
      "",
      "✅ 验收标准 1: Docker 环境启动成功 (./docker/quick-test.sh start 无错误)",
      "✅ 验收标准 2: Seed 数据加载成功 (./docker/quick-test.sh seed 无错误)",
      "✅ 验收标准 3: E2E 测试执行通过 (cd frontend && npm run e2e -- --grep '对应模块')",
      "✅ 验收标准 4: 测试通过率 100% (0 failed tests)",
      "✅ 验收标准 5: 稳定性验证通过 (连续运行 3 次测试全部通过，无 Flaky 测试)",
      "✅ 验收标准 6: 生成并检查测试报告 (npm run e2e:report 可查看截图/视频)",
      "❌ 未通过验收标准则必须修复对应 Bug 后重新运行测试"
    ],
    "passes": false
  },
  {
    "id": "P0-QA-001",
    "story": "后端 API Response 泛型类型重构",
    "priority": "high",
    "requirements": [
      "使用 swagger allOf 组合实现类型化响应 (替代 Go 泛型，因 swag 不支持)",
      "所有 handler swagger 注解使用 dto.Response{data=ConcreteType} 格式",
      "swagger.yaml 正确输出 allOf 组合的具体类型",
      "前端 SDK 正确生成交叉类型 DtoResponse & { data: ConcreteType }",
      "npm run build 类型检查通过"
    ],
    "passes": true
  },
  {
    "id": "P0-QA-002",
    "story": "前端 SDK 类型完整性验证",
    "priority": "high",
    "requirements": [
      "修复 npm 依赖问题 (Semi UI)",
      "运行 npm run api:generate 重新生成 SDK",
      "验证生成的 SDK 包含完整类型定义",
      "确保 npm run build 类型检查通过",
      "添加 npm run type-check 到 CI 流程"
    ],
    "passes": true
  },
  {
    "id": "P0-QA-003",
    "story": "Docker 测试环境完善",
    "priority": "high",
    "requirements": [
      "创建 docker/seed-data.sql 包含各模块测试数据",
      "创建 docker/test-api.sh API 冒烟测试脚本",
      "创建 docker/quick-test.sh 快速验证脚本",
      "验证 docker-compose.test.yml 正常启动",
      "文档化测试环境使用方法"
    ],
    "passes": true
  },
  {
    "id": "P0-QA-004",
    "story": "后端集成测试（真实数据库）",
    "priority": "high",
    "requirements": [
      "配置 testcontainers 或使用 Docker PostgreSQL",
      "创建集成测试套件对真实数据库运行",
      "测试 Repository 层实际数据库操作",
      "添加 make test-integration 目标",
      "集成测试覆盖核心业务流程"
    ],
    "passes": true
  },
  {
    "id": "P0-QA-005",
    "story": "后端路由参数命名规范化",
    "priority": "high",
    "requirements": [
      "统一使用 snake_case 命名路由参数",
      "将 :id 改为具体名称如 :product_id",
      "将 :productId 改为 :product_id",
      "更新所有 handler 获取参数的代码",
      "更新 swagger 注解和前端 SDK"
    ],
    "passes": true
  },
  {
    "id": "P0-QA-006",
    "story": "CI/CD 自动化测试流水线",
    "priority": "high",
    "requirements": [
      "创建 GitHub Actions 后端测试工作流",
      "创建 GitHub Actions 前端构建/测试工作流",
      "添加 Docker 镜像构建验证步骤",
      "强制测试覆盖率阈值 (80%)",
      "添加类型检查失败阻止合并"
    ],
    "passes": true
  },
  {
    "id": "P0-E2E-001",
    "story": "E2E 测试基础设施配置 (Playwright + Docker)",
    "priority": "high",
    "requirements": [
      "安装 Playwright: npm install -D @playwright/test && npx playwright install --with-deps",
      "创建 playwright.config.ts: baseURL=http://localhost:3001, 多浏览器(chromium/firefox/webkit), 截图/视频/trace 配置",
      "创建目录结构: frontend/tests/e2e/{auth,products,partners,inventory,transactions,finance,reports,settings}/",
      "创建 Page Object 基类: frontend/tests/e2e/pages/BasePage.ts",
      "创建通用 fixtures: 登录状态保持、测试数据重置、API 客户端",
      "创建 test-utils: login helper (使用 seed 用户 admin/sales/warehouse/finance)",
      "配置 package.json scripts: e2e, e2e:headed, e2e:debug, e2e:report, e2e:ci",
      "创建 GitHub Actions E2E workflow: docker-compose.test.yml + playwright test",
      "创建示例登录 E2E 测试验证配置正确"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-001",
    "story": "前端 i18n 基础设施搭建 (react-i18next)",
    "priority": "high",
    "requirements": [
      "安装依赖: npm install i18next react-i18next i18next-http-backend i18next-browser-languagedetector",
      "创建 frontend/src/i18n/index.ts: i18n 初始化配置，支持 zh-CN/en-US",
      "创建 frontend/src/i18n/config.ts: NAMESPACES 定义 (common/validation/auth/catalog/partner/trade/inventory/finance/system)",
      "创建 frontend/src/i18n/types.ts: TypeScript 类型声明，支持类型安全的翻译 key",
      "创建 frontend/src/components/providers/I18nProvider.tsx: 集成 I18nextProvider + Semi Design LocaleProvider",
      "更新 frontend/src/main.tsx: 使用 I18nProvider 包裹 App",
      "创建 frontend/src/hooks/useI18n.ts: 封装 useTranslation，支持 namespace",
      "创建 frontend/src/hooks/useFormatters.ts: 日期/数字/货币格式化 hooks",
      "创建 frontend/src/locales/zh-CN/common.json: 通用字符串 (actions/status/labels/messages)",
      "创建 frontend/src/locales/en-US/common.json: 英文通用字符串",
      "npm run build 类型检查通过",
      "验证 i18n 初始化成功，语言切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-002",
    "story": "通用组件 i18n 迁移 (Common Components)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/components/common/LanguageSwitcher.tsx: 语言选择下拉组件",
      "更新 frontend/src/components/layout/Header.tsx: 添加 LanguageSwitcher",
      "创建 frontend/src/locales/zh-CN/validation.json: 迁移 validation.ts 中所有验证消息",
      "创建 frontend/src/locales/en-US/validation.json: 验证消息英文翻译",
      "更新 frontend/src/components/common/form/validation.ts: 使用 i18n 获取消息",
      "更新 frontend/src/components/common/table/DataTable.tsx: '操作'/'暂无数据' 等文本",
      "更新 frontend/src/components/common/table/TableToolbar.tsx: 按钮文本、placeholder",
      "更新 frontend/src/components/common/table/TableActions.tsx: 操作按钮文本",
      "更新 frontend/src/components/layout/Sidebar.tsx: 导航菜单文本",
      "npm run build 类型检查通过",
      "中英文切换后通用组件文本正确变化"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-003",
    "story": "Auth 模块 i18n 迁移",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/auth.json: 登录/登出/权限相关文本",
      "创建 frontend/src/locales/en-US/auth.json: Auth 英文翻译",
      "更新 frontend/src/pages/Login.tsx: 登录表单标签、placeholder、错误消息",
      "更新认证相关组件: Token 过期提示、无权限提示等",
      "更新 frontend/src/store/authStore.ts 相关错误消息（如有）",
      "npm run build 类型检查通过",
      "登录页面中英文切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-004",
    "story": "Dashboard 模块 i18n 迁移",
    "priority": "medium",
    "requirements": [
      "在 common.json 中添加 Dashboard 相关通用文本",
      "更新 frontend/src/pages/Dashboard.tsx: 统计卡片标题、图表标题、待办事项等",
      "更新 Dashboard 相关子组件（如有）",
      "npm run build 类型检查通过",
      "Dashboard 页面中英文切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-005",
    "story": "Catalog 模块 i18n 迁移 (商品/分类)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/catalog.json: 商品管理/分类管理相关文本",
      "创建 frontend/src/locales/en-US/catalog.json: Catalog 英文翻译",
      "更新 frontend/src/pages/catalog/Products.tsx: STATUS_LABELS、表头、Toast 消息、Modal 确认",
      "更新 frontend/src/pages/catalog/ProductDetail.tsx: 详情页标签",
      "更新 frontend/src/features/catalog/ProductForm.tsx: 表单标签、placeholder",
      "更新 frontend/src/pages/catalog/Categories.tsx: 分类管理相关文本",
      "更新 frontend/src/features/catalog/CategoryForm.tsx（如有）",
      "npm run build 类型检查通过",
      "商品/分类页面中英文切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-006",
    "story": "Partner 模块 i18n 迁移 (客户/供应商/仓库)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/partner.json: 客户/供应商/仓库相关文本",
      "创建 frontend/src/locales/en-US/partner.json: Partner 英文翻译",
      "更新 frontend/src/pages/partner/Customers.tsx: 表头、状态标签、消息",
      "更新 frontend/src/features/partner/CustomerForm.tsx: 表单标签",
      "更新 frontend/src/pages/partner/Suppliers.tsx: 供应商列表相关文本",
      "更新 frontend/src/features/partner/SupplierForm.tsx: 表单标签",
      "更新 frontend/src/pages/partner/Warehouses.tsx: 仓库管理相关文本",
      "更新 frontend/src/features/partner/WarehouseForm.tsx（如有）",
      "npm run build 类型检查通过",
      "客户/供应商/仓库页面中英文切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-007",
    "story": "Inventory 模块 i18n 迁移 (库存管理)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/inventory.json: 库存查询/调整/盘点相关文本",
      "创建 frontend/src/locales/en-US/inventory.json: Inventory 英文翻译",
      "更新 frontend/src/pages/inventory/Stock.tsx: 库存列表表头、筛选标签",
      "更新 frontend/src/pages/inventory/StockDetail.tsx: 库存明细、批次、流水",
      "更新 frontend/src/pages/inventory/StockAdjustment.tsx: 调整表单标签",
      "更新 frontend/src/pages/inventory/StockTaking.tsx: 盘点相关文本",
      "npm run build 类型检查通过",
      "库存模块页面中英文切换正常"
    ],
    "passes": true
  },
  {
    "id": "P0-I18N-008",
    "story": "Trade 模块 i18n 迁移 (销售/采购/退货)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/trade.json: 订单状态、表单标签、消息",
      "创建 frontend/src/locales/en-US/trade.json: Trade 英文翻译",
      "更新 frontend/src/pages/trade/SalesOrders.tsx: STATUS_OPTIONS、表头、筛选",
      "更新 frontend/src/pages/trade/SalesOrderForm.tsx: 开单表单标签",
      "更新 frontend/src/pages/trade/SalesOrderDetail.tsx: 订单详情标签",
      "更新 frontend/src/pages/trade/PurchaseOrders.tsx: 采购订单相关文本",
      "更新 frontend/src/pages/trade/PurchaseOrderForm.tsx: 采购开单表单",
      "更新 frontend/src/pages/trade/SalesReturns.tsx: 销售退货相关文本",
      "更新 frontend/src/pages/trade/PurchaseReturns.tsx: 采购退货相关文本",
      "npm run build 类型检查通过",
      "交易模块所有页面中英文切换正常"
    ],
    "passes": false
  },
  {
    "id": "P0-I18N-009",
    "story": "Finance 模块 i18n 迁移 (应收应付/收支)",
    "priority": "high",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/finance.json: 财务模块相关文本",
      "创建 frontend/src/locales/en-US/finance.json: Finance 英文翻译",
      "更新 frontend/src/pages/finance/Receivables.tsx: 应收账款相关文本",
      "更新 frontend/src/pages/finance/Payables.tsx: 应付账款相关文本",
      "更新 frontend/src/pages/finance/ReceiptVoucher.tsx: 收款单表单",
      "更新 frontend/src/pages/finance/PaymentVoucher.tsx: 付款单表单",
      "更新 frontend/src/pages/finance/Expenses.tsx: 费用记录相关文本",
      "更新 frontend/src/pages/finance/OtherIncome.tsx: 其他收入相关文本",
      "npm run build 类型检查通过",
      "财务模块所有页面中英文切换正常"
    ],
    "passes": false
  },
  {
    "id": "P0-I18N-010",
    "story": "System 模块 i18n 迁移 (用户/角色/设置)",
    "priority": "medium",
    "requirements": [
      "创建 frontend/src/locales/zh-CN/system.json: 系统管理相关文本",
      "创建 frontend/src/locales/en-US/system.json: System 英文翻译",
      "更新 frontend/src/pages/system/Users.tsx: 用户管理相关文本",
      "更新 frontend/src/pages/system/Roles.tsx: 角色管理相关文本",
      "更新 frontend/src/pages/system/Permissions.tsx: 权限配置相关文本",
      "更新其他系统设置页面（如有）",
      "npm run build 类型检查通过",
      "系统管理模块页面中英文切换正常"
    ],
    "passes": false
  },
  {
    "id": "P0-I18N-011",
    "story": "i18n 英文翻译完善与审核",
    "priority": "medium",
    "requirements": [
      "审核所有 en-US/*.json 翻译文件，确保翻译准确",
      "检查专业术语翻译一致性 (如 'receivables'/'payables' 等)",
      "添加缺失的英文翻译 key",
      "验证所有页面英文模式下无翻译 key 裸露",
      "验证日期/数字/货币格式根据语言正确显示"
    ],
    "passes": false
  },
  {
    "id": "P0-I18N-012",
    "story": "i18n E2E 测试与集成验证",
    "priority": "high",
    "requirements": [
      "创建 frontend/tests/e2e/i18n/language-switch.spec.ts: 语言切换 E2E 测试",
      "E2E: 验证默认语言为中文",
      "E2E: 切换到英文后所有页面文本正确变化",
      "E2E: 刷新页面后语言偏好保持",
      "E2E: Semi Design 组件（DatePicker/Table 分页等）语言同步切换",
      "E2E: 验证表单验证消息语言切换",
      "添加 ESLint 规则检测硬编码中文字符串",
      "npm run build 类型检查通过",
      "E2E 测试 100% 通过"
    ],
    "passes": false
  }
]