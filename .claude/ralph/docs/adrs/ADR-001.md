# ADR-001: CSS Anti-Pattern Remediation Strategy

## Context

A CSS audit of the ERP frontend identified significant technical debt in the styling codebase:

- **74 instances** of hardcoded pixel values for spacing (should use design tokens)
- **68 instances** of `!important` declarations (mostly for Semi Design overrides)
- **95% of files** use desktop-first (max-width) responsive design instead of mobile-first
- **Dashboard layout** uses flexbox with calc() gymnastics instead of CSS Grid

These anti-patterns lead to:
1. Inconsistent spacing across the application
2. Difficulty maintaining and overriding styles
3. Bloated CSS for mobile devices
4. Complex responsive breakpoint management

## Decision

We will address these issues through a phased remediation approach:

### Phase 1: Prevention (CSS-009)
- Install Stylelint with rules to catch anti-patterns
- Configure as warnings (not blocking) to allow gradual migration
- Integrate into CI pipeline

### Phase 2: Foundation (CSS-001, CSS-002, CSS-006)
- Convert spacing to design tokens
- Migrate to mobile-first responsive design
- Start with high-traffic components (Form, Layout)

### Phase 3: Optimization (CSS-004, CSS-005, CSS-007)
- Eliminate !important through proper specificity
- Refactor Dashboard to CSS Grid
- Create utility classes for common patterns

### Phase 4: Cleanup (CSS-003, CSS-008)
- Fix remaining page-level spacing issues
- Document utility classes

## Consequences

### Positive
- Consistent spacing via design tokens enables theme customization
- Mobile-first CSS reduces mobile payload and complexity
- Proper specificity makes styles easier to maintain and override
- CSS Grid provides cleaner responsive layouts
- Stylelint prevents future regressions

### Negative
- Initial effort required for migration (estimated 2-3 days per phase)
- Risk of visual regressions during migration
- Learning curve for developers unfamiliar with design tokens
- Some legitimate !important uses (utilities, accessibility) must be preserved

### Alternatives Considered
- **Option A: Full rewrite** - Too risky, would delay feature development
- **Option B: Ignore and move forward** - Technical debt would compound
- **Option C: CSS-in-JS migration** - Too large a change, not justified by current issues

## Trade-Offs
- **Pros**: Improved maintainability, theme support, mobile performance
- **Cons**: Migration effort, testing requirements, potential regressions
- **Risk Level**: MEDIUM (mitigated by phased approach and Stylelint)

## Status
Accepted

## Date
2026-01-29
